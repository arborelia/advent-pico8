pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
function pause()
 while btn(🅾️) or btn(❎) do
  flip()
 end
 while not btn(🅾️) or btn(❎) do
  flip()
 end
end

-- if we passed the test on
-- the site, celebrate
function yay()
 star()
 cursor(28, 90)
 print("\ac1g2c3e3c4")
 color(10)
 print("you did the thing!")
 
 pause()
end

function star()
 cls(1)
 
 -- draw a fancy textured star.
 -- it's okay that it takes
 -- a while to draw because
 -- that makes it look cooler
 local nsteps=20000
 for step=1,nsteps do
  local angle = step / nsteps + .25
  local wobble = sin(angle * 5)
  local radius = 20 + wobble*5
  if radius > 20 then
   radius += wobble * wobble * 5
  end
  local x = 64 + cos(angle) * radius
  local y = 64 - sin(angle) * radius
  line(64, 64, x, y, 9)
  
  radius *= 0.8
  x = 64 + cos(angle) * radius
  y = 64 - sin(angle) * radius
  line(64, 64, x, y, 10)
 end
end

function check(answer)
 color(11)
 print("check answer: "..answer)
 pause()
 if (btn(🅾️)) yay()
end

function test(result, expected, name)
 if type(result) != type(expected) then
  color(8)
  print("\ae- 😐 \0")
  print("expected "..type(expected)..", got "..type(result))
 else
  -- we can't print bools???
  if result==true then
   result = "true"
  end
  if result==false then
   result = "false"
  end
  if result==nil then
   result = "nil"
  end
  if expected==true then
   expected = "true"
  end
  if expected==false then
   expected = "false"
  end
  if expected==nil then
   expected = "nil"
  end

  checktext = result.." = "..expected
  if result == expected then
   color(11)
   print("\ag ♥ \0")
  else
   color(8)
   print("\ae- ❎ \0")  
  end

  color(7)
  if name != nil then
   print(name..": \0")
  end
  if result == expected then
   print(result)
  else
   print(result.." != "..expected)
  end
 end
 assert(result == expected)
end

-->8
function minify(num)
 return shr(num,16)
end

function bigify(num)
 return shl(num,16)
end

function inttext(val)
 return tostr(val, 2)
end

function bigmul(a, b)
 -- returns a string of a * b
 -- a and b are fixed point nums
 prod = minify(a) * b
 return inttext(prod)
end

function mul32(a, b)
 -- multiplies a * b
 -- where both of them are 32bit ints
 -- so one of them needs to be shifted
 return a * bigify(b,16)
end

-->8
function at(str, pos)
 return sub(str, pos, pos)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000770000000000700070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700070000900000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00770070000900007007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007009990077077000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000700009a90070070077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07770000009a90070000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000009a90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009aa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9999999999aaaa999999999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9aaaaaaaaaaaaaaaaaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09aaaaaaaaaaaaaaaaaa990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0099aaaaaaaaaaaaaaa9000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00009aaaaaaaaaaaa990077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7770099aaaaaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000009aaaaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009aaaaaa99000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000aaaaaaaa9007777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777009aaaaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000009aaaaaaaa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000009aa9999aa9900700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007099a900009a9900077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00770099900000099900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700090000000000900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
